---
title: ...with web3.js
slug: /building-on-lisk/interacting-with-the-blockchain/web3
description: Documentation for using web3.js, a JavaScript library for EVM-compatible blockchain interactions. This page covers installation, setup, connecting to the Lisk network, reading and writing blockchain data, and interacting with smart contracts.
keywords:
  [
    web3.js,
    JavaScript library,
    Lisk network,
    Lisk mainnet,
    Lisk testnet,
    smart contracts,
    EVM-compatible,
    blockchain,
    JsonRpcProvider,
    Signer,
    ABI,
    interacting with smart contract,
  ]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Interacting with the blockchain via web3.js

[web3.js](https://web3js.org/) is a JavaScript library for building and interacting with EVM-compatible blockchain networks.

You can use web3.js to interact with smart contracts deployed on the Lisk network.


## Install

To install web3.js run the following command:
<Tabs>
  <TabItem value="npm" label="NPM" default>
    ```bash
    npm install --save web3
    ```
  </TabItem>
  <TabItem value="yarn" label="Yarn">
    ```bash
    yarn add web3
    ```
  </TabItem>
</Tabs>

## Import

Before you can start using web3.js, you need to import it into your project.

Web3.js v4 supports both CommonJS and native ESM module imports.

Add the following line of code to the top of your file to import web3.js:
<Tabs>
  <TabItem value="cjs" label="CommonJS" default>
    ```js
    const { Web3 } = require('web3');
    ```
  </TabItem>
  <TabItem value="esm" label="ESM Module">
    ```ts
    import { Web3 } from 'web3';
    ```
  </TabItem>
</Tabs>

## Connecting to Lisk

You can connect to Lisk by instantiating a new web3.js `JsonRpcProvider` object with an RPC URL of the Lisk network:

```javascript
import { Web3 } from 'web3';

// Instantiate a web3 object by passing the RPC URL of Lisk.
const web3 = new Web3('https://rpc.sepolia-api.lisk.com');

// Retrieve data from blockchain
web3.eth.getBlockNumber().then(console.log);
```

{/* :::note
A **Provider** (in web3.js) is a class that provides an abstraction for a connection to the Ethereum Network. It provides read-only access to the Blockchain and its status.
::: */}

## Reading data from the blockchain

Once you have created a provider, you can use it to read data from the Lisk network.

For example, you can use the `getBlockNumber` method to get the latest block:

```javascript
// Retrieve data from blockchain
async function getLatestBlock() {
    const latestBlock = await web3.eth.getBlockNumber()
    console.log("The latest block's number is:", latestBlock);
}

getLatestBlock();
```

<details>
<summary>Complete code example</summary>
```javascript
import { Web3 } from 'web3';

// Instantiate a web3 object by passing the RPC URL of Lisk.
const web3 = new Web3('https://rpc.sepolia-api.lisk.com');

// Retrieve data from blockchain
async function getLatestBlock() {
    const latestBlock = await web3.eth.getBlockNumber()
    console.log("The latest block's number is:", latestBlock);
}

getLatestBlock();
```
</details>

:::tip 
Web3 provides a wide range of [Web3Eth methods](https://docs.web3js.org/guides/web3_eth/methods/) that can be used to interact with the blockchain.
:::
## Writing data to the blockchain

In order to write data to the Lisk network, you need to create a [`Wallet`](https://docs.web3js.org/guides/wallet/).

:::note
A Web3.js `Wallet` is your main entry point if you want to use a private key directly to do any blockchain operations (transactions), also called Signer in other libraries.
:::

You can create a `Wallet` by instantiating a new web3.js `Wallet` object, and add private key(s) into it.
Such private keys can later be used to send transaction on the blockchain.

```javascript
// Add an account to a wallet
const privateKey = '0x<SENDER_PRIVATE_KEY>';
const account = web3.eth.accounts.wallet.add(privateKey);

// Create transaction object to send '.0001' eth to '0x.....' address from the account[0]
const tx =
{
    from: account[0].address,
    to: '<RECIPIENT_ADDRESS>',
    value: web3.utils.toWei('.0001', 'ether')
};
// The 'from' address must match the one previously added with 'wallet.add'

// Send the transaction
const txReceipt = await web3.eth.sendTransaction(tx);

console.log('Tx hash:', txReceipt.transactionHash)
```

:::info
`PRIVATE_KEY` is the private key of the account that is to be sign and send a transaction using web3.js.
:::

The receiving account's balance will increment by `0.0001` ETH once the transaction execution is successful.

<details>
<summary>Complete code example</summary>
```js
import { Web3 } from 'web3';

// Instantiate a web3 object by passing the RPC URL of Lisk.
const web3 = new Web3('https://rpc.sepolia-api.lisk.com');

// Add an account to a wallet
const privateKey = '0x<SENDER_PRIVATE_KEY>';
const account = web3.eth.accounts.wallet.add(privateKey);

// Create transaction object to send '.0001' eth to '0x.....' address from the account[0]
const tx =
{
    from: account[0].address,
    to: '<RECIPIENT_ADDRESS>',
    value: web3.utils.toWei('.0001', 'ether')
};
// The 'from' address must match the one previously added with 'wallet.add'

// Send the transaction
const txReceipt = await web3.eth.sendTransaction(tx);

console.log('Tx hash:', txReceipt.transactionHash)
```
</details>

## Interacting with smart contracts

You can use web3.js to interact with a smart contract on Lisk by instantiating a `Contract` object using the ABI and address of a deployed contract:

:::tip
The ABI of a contract can be found on the respective contract page in [BlockScout](https://sepolia-blockscout.lisk.com/).

For example, you can use the ABI for the [Hello contract](https://sepolia-blockscout.lisk.com/address/0xb18eb752813c2fbedfdf2be6e5e842a85a3b8539?tab=contact_code). Just scroll down to `Contract ABI` and copy the deployed contract's ABI.
:::

```javascript title="Reading from contracts"
// Replace the contractAddress' value with the desired contract.
const contractAddress = "CONTRACT_ADDRESS"
// read-only
const contract = new ethers.Contract(contractAddress, abi, provider);
const abi = [
â€¦ // ABI of deployed contract
];

async function getHello() {
    const value = await contract.message("0x3C46A11471f285E36EE8d089473ce98269D1b081");
    console.log(value.toString());
}

getHello();
```

:::info
`CONTRACT_ADDRESS` is the address of the deployed contract.
:::

:::note
A **Contract** (in web3.js) is an abstraction that represents a connection to a specific contract on the Lisk Network, so that applications can use it like a normal JavaScript object.
:::

For reading and writing contracts, provide a `Signer` object instead of a `Provider` object:

```javascript title="Writing to contracts"
// read & write 
const contract = new ethers.Contract(contractAddress, abi, signer);
```

Once you have created a `Contract` object, you can use it to call desired methods on the smart contract:

```javascript
async function createHello(message) {
  const tx = await contract.createHello(message);
  return tx.hash;
}

//createHello("Hello Lisk!");
```

:::tip
For an overview of existing public functions for the contract, please check the [Read Contract](https://sepolia-blockscout.lisk.com/address/0xb18eb752813c2fbedfdf2be6e5e842a85a3b8539?tab=read_contract) and [Write Contract](https://sepolia-blockscout.lisk.com/address/0xb18eb752813c2fbedfdf2be6e5e842a85a3b8539?tab=write_contract) tabs for the specific contract.
:::

<details>
<summary>Complete code example</summary>
```javascript
const ethers = require('ethers');

const url = 'https://rpc.sepolia-api.lisk.com';
const provider = new web3.jsonRpcProvider(url);
const privateKey = 'PRIVATE_KEY';
const signer = new ethers.Wallet(privateKey, provider);
const contractAddress = "0xb18eb752813c2fbedfdf2be6e5e842a85a3b8539"
// Read & Write
const contract = new ethers.Contract(contractAddress, abi, signer);
// Read-only
//const contract = new ethers.Contract(contractAddress, abi, provider);
const abi = [
    {
        "inputs": [],
        "stateMutability": "nonpayable",
        "type": "constructor"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "address",
                "name": "sender",
                "type": "address"
            },
            {
                "indexed": false,
                "internalType": "string",
                "name": "message",
                "type": "string"
            }
        ],
        "name": "NewHello",
        "type": "event"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "name": "blacklist",
        "outputs": [
            {
                "internalType": "string",
                "name": "",
                "type": "string"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "counter",
        "outputs": [
            {
                "internalType": "uint32",
                "name": "",
                "type": "uint32"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "string",
                "name": "_message",
                "type": "string"
            }
        ],
        "name": "createHello",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "maxLength",
        "outputs": [
            {
                "internalType": "uint32",
                "name": "",
                "type": "uint32"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            }
        ],
        "name": "message",
        "outputs": [
            {
                "internalType": "string",
                "name": "",
                "type": "string"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "minLength",
        "outputs": [
            {
                "internalType": "uint32",
                "name": "",
                "type": "uint32"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "owner",
        "outputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "string[]",
                "name": "_newBlackList",
                "type": "string[]"
            }
        ],
        "name": "setBlacklist",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint32",
                "name": "_newMin",
                "type": "uint32"
            },
            {
                "internalType": "uint32",
                "name": "_newMax",
                "type": "uint32"
            }
        ],
        "name": "setMinMaxMessageLength",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    }
]

async function createHello(message) {
    const tx = await contract.createHello(message);
    return tx.hash;
}

//createHello("Hello Lisk!");

async function getHello() {
    const value = await contract.message("0x3C46A11471f285E36EE8d089473ce98269D1b081");
    console.log(value.toString());
}

getHello();
```
</details>