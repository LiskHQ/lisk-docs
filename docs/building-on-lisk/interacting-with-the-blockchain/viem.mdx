---
title: ...with viem
slug: /interacting-with-blockchain/viem
description: Documentation for using Viem, a TypeScript interface for EVM-compatible blockchains. This page covers installation, setup, and various functionalities such as reading and writing blockchain data and interacting with smart contracts on Lisk.
keywords:
  [
    viem,
    Lisk,
    Lisk mainnet,
    Lisk testnet,
    Ethereum,
    smart contracts,
    blockchain,
    RPC URL,
    JavaScript,
    TypeScript,
  ]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Interacting with the blockchain with viem

[viem](https://viem.sh/) a TypeScript interface for Ethereum that provides low-level stateless primitives for interacting with Ethereum.

You can use viem to interact with smart contracts deployed on Lisk.
Viem provides first-class support for chains implemented on the OP stack, see [viem.sh > OP stack](https://viem.sh/op-stack).

## Install

To install viem run the following command:

```bash
npm install --save viem
```

## Setup

Before you can start using viem, you need to setup a [Client](https://viem.sh/op-stack/client) with a desired [Transport](https://viem.sh/docs/clients/intro.html#transports) and [Chain](https://viem.sh/docs/chains/introduction).

### Public Client

By extending the public client with `publicActionsL2` or `publicActionsL1`, you have access to additional methods for Lisk and other chains built on top of the OP stack.
See [Layer 2 extensions](https://viem.sh/op-stack/client#layer-2-extensions) for more information.

```javascript title="config.ts"
import { createPublicClient, http, parseEther } from 'viem'
import { liskSepolia } from 'viem/chains'
import { publicActionsL2 } from 'viem/op-stack'
 
export const publicClientL2 = createPublicClient({
  chain: liskSepolia,
  transport: http()
}).extend(publicActionsL2()) 
```

### Wallet Client

In order to write data to Lisk, you need to create a Wallet client (`createWalletClient`) and specify an [`Account`](https://ethereum.org/en/developers/docs/accounts/) to use.

By extending the wallet client with `walletActionsL1` or `walletActionsL2`, you have access to additional methods for Lisk and other chains built on top of the OP stack.
See [Layer 2 extensions](https://viem.sh/op-stack/client#layer-2-extensions) for more information.

<Tabs>
<TabItem value="jsonrpc" label="JSON-RPC Account">

```js title="config.ts"
import { createWalletClient, custom } from 'viem'
import { sepolia } from 'viem/chains'
import { walletActionsL1 } from 'viem/op-stack'
 
// Retrieve Account from an EIP-1193 Provider.
const [account] = await window.ethereum.request({ 
  method: 'eth_requestAccounts'
}) 
 
export const walletClientL1 = createWalletClient({
  account, 
  chain: sepolia,
  transport: custom(window.ethereum)
}).extend(walletActionsL1())
```

</TabItem>
<TabItem value="local" label="Local Account">

```js title="config.ts"
import { createWalletClient, custom } from 'viem'
import { privateKeyToAccount } from 'viem/accounts'
import { sepolia } from 'viem/chains'
import { walletActionsL1 } from 'viem/op-stack'
 
export const walletClientL1 = createWalletClient({
  account: privateKeyToAccount('0x...'), 
  chain: sepolia,
  transport: custom(window.ethereum)
}).extend(walletActionsL1())
```

</TabItem>
</Tabs>

:::info
In addition to making a JSON-RPC request (`eth_requestAccounts`) to get an Account, viem provides various helper methods for creating an `Account`, including: [`privateKeyToAccount`](https://viem.sh/docs/accounts/privateKey.html), [`mnemonicToAccount`](https://viem.sh/docs/accounts/mnemonic.html), and [`hdKeyToAccount`](https://viem.sh/docs/accounts/hd.html).
 
{/* To use Lisk Sepolia (testnet), replace `lisk` with `liskSepolia`.
 */}
:::

## Reading data from the blockchain

Once you have created a client, you can use it to read and access data from Lisk using [Public Actions](https://viem.sh/docs/actions/public/introduction) and [OP stack public actions](https://viem.sh/op-stack/client#layer-2-extensions).

Public Actions are client methods that map one-to-one with a "public" Ethereum RPC method (`eth_blockNumber`, `eth_getBalance`, etc.).

For example, you can use the `getBlockNumber` client method to get the latest block:

```javascript 
import { publicClientL2 } from './config'

const blockNumber = await publicClientL2.getBlockNumber();

const l1Gas = await publicClientL2.estimateL1Gas({ 
  account: '0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266', 
  to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8', 
  value: parseEther('1') 
}) 
```


## Writing data to the blockchain

Once you have created a client, you can use it to read and access data from Lisk using [Wallet Actions](https://viem.sh/docs/actions/wallet/introduction) and [OP stack wallet actions](https://viem.sh/op-stack/client#layer-2-extensions).

```javascript
import { account, walletClient } from './config'

walletClient.sendTransaction({ ... });
```

## Interacting with smart contracts

You can use viem to interact with a smart contract on Lisk by creating a `Contract` instance using [`getContract`](https://viem.sh/docs/contract/getContract.html) and passing it the contract ABI, contract address, and and [Public](https://viem.sh/docs/clients/public.html) and/or [Wallet](https://viem.sh/docs/clients/wallet.html) Client:

```javascript
import { getContract } from 'viem';
import { wagmiAbi } from './abi';
import { publicClient } from './client';

// 1. Create contract instance
const contract = getContract({
  address: 'CONTRACT_ADDRESS',
  abi: wagmiAbi,
  publicClient,
});

// 2. Call contract methods, listen to events, etc.
const result = await contract.read.totalSupply();
```

:::info

`CONTRACT_ADDRESS` is the address of the deployed contract.

:::