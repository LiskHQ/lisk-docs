"use strict";(self.webpackChunklisk_docs=self.webpackChunklisk_docs||[]).push([[1068],{7553:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>l});var n=s(5893),i=s(1151);const a={title:"Fees",sidebar_position:1,slug:"/fees",description:"Documentation about network fees on Lisk. This page covers details of the two-component cost system involving L2 execution fees and L1 data fees, and offers insights on fee variations and cost-saving strategies.",keywords:["Lisk fees","transaction fees","network fees","Lisk network fees","L2 execution fee","L1 security fee","L1 data fee","transaction costs","gas fees","fee calculation","cost-saving","transaction timing","fee variations","Lisk platform"]},o="Fees",r={id:"about-lisk/fees",title:"Fees",description:"Documentation about network fees on Lisk. This page covers details of the two-component cost system involving L2 execution fees and L1 data fees, and offers insights on fee variations and cost-saving strategies.",source:"@site/docs/about-lisk/fees.md",sourceDirName:"about-lisk",slug:"/fees",permalink:"/lisk-documentation/fees",draft:!1,unlisted:!1,editUrl:"https://github.com/LiskHQ/lisk-documentation/tree/main/docs/about-lisk/fees.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Fees",sidebar_position:1,slug:"/fees",description:"Documentation about network fees on Lisk. This page covers details of the two-component cost system involving L2 execution fees and L1 data fees, and offers insights on fee variations and cost-saving strategies.",keywords:["Lisk fees","transaction fees","network fees","Lisk network fees","L2 execution fee","L1 security fee","L1 data fee","transaction costs","gas fees","fee calculation","cost-saving","transaction timing","fee variations","Lisk platform"]},sidebar:"documentationSidebar",previous:{title:"Network information, official explorers & faucets",permalink:"/lisk-documentation/network-info"},next:{title:"Building on Lisk",permalink:"/lisk-documentation/category/building-on-lisk"}},c={},l=[{value:"How are fees on Lisk calculated?",id:"how-are-fees-on-lisk-calculated",level:2},{value:"L2 Execution Fee",id:"l2-execution-fee",level:3},{value:"L2 Execution Fee calculation",id:"l2-execution-fee-calculation",level:4},{value:"L1 Data Fee",id:"l1-data-fee",level:3},{value:"L1 Data Fee calculation",id:"l1-data-fee-calculation",level:4},{value:"EIP-1559 Parameters",id:"eip-1559-parameters",level:2},{value:"How do fluctuation in gas price on Ethereum (L1) affect transaction costs on Lisk (L2)?",id:"how-do-fluctuation-in-gas-price-on-ethereum-l1-affect-transaction-costs-on-lisk-l2",level:2}];function h(e){const t={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"fees",children:"Fees"}),"\n",(0,n.jsxs)(t.p,{children:["Fees on Lisk Mainnet are, for the most part, significantly lower than on the L1 Ethereum network.\nThe low transaction fees can be provided because Lisk is a ",(0,n.jsx)(t.a,{href:"https://ethereum.org/en/developers/docs/scaling/optimistic-rollups",children:"Layer 2 optimistic rollup"})," network."]}),"\n",(0,n.jsx)(t.h2,{id:"how-are-fees-on-lisk-calculated",children:"How are fees on Lisk calculated?"}),"\n",(0,n.jsxs)(t.p,{children:["Every Lisk Mainnet transaction has two costs: An ",(0,n.jsx)(t.strong,{children:"L2 execution fee"})," and an ",(0,n.jsx)(t.strong,{children:"L1 data fee"}),".\nAt a high level, the L2 fee is the cost to execute your transaction on L2 and the L1 fee is the estimated cost to publish your transaction on L1 (in a rollup batch)."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-text",children:"transaction_fee = l2_execution_fee + l1_data_fee\n"})}),"\n",(0,n.jsx)(t.h3,{id:"l2-execution-fee",children:"L2 Execution Fee"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.a,{href:"https://docs.optimism.io/stack/transactions/fees#execution-gas-fee",children:"L2 Execution Fee"})," is equal to the amount of gas used by the transaction multiplied by the gas price attached to the transaction."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"l2_execution_fee = transaction_gas_price * l2_gas_used\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Because Lisk Mainnet is EVM equivalent, the ",(0,n.jsx)(t.strong,{children:"gas used"})," by a transaction on Lisk Mainnet is ",(0,n.jsx)(t.strong,{children:"exactly the same"})," as the gas used by the same transaction on Ethereum.\nIf a transaction costs 100,000 gas on Ethereum, it will cost 100,000 gas on Lisk Mainnet.\n",(0,n.jsx)(t.strong,{children:"The only difference is that the gas price on Lisk Mainnet is much lower"})," than the gas price on Ethereum so you'll end up paying much less in ETH.\nThis also means that the total cost of the L2 Execution Fee of a transaction can be estimated using the same tools you would use to estimate the cost of a transaction on Ethereum."]}),"\n",(0,n.jsx)(t.h4,{id:"l2-execution-fee-calculation",children:"L2 Execution Fee calculation"}),"\n",(0,n.jsxs)(t.p,{children:["The transaction gas price is the sum of the ",(0,n.jsx)(t.a,{href:"https://ethereum.org/en/developers/docs/gas/#base-fee",children:"Base Fee"})," and the optional additional ",(0,n.jsx)(t.a,{href:"https://ethereum.org/en/developers/docs/gas/#priority-fee",children:"Priority Fee"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"transaction_gas_price = l2_base_fee + l2_priority_fee\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Like Ethereum, Lisk Mainnet uses the ",(0,n.jsx)(t.a,{href:"https://eips.ethereum.org/EIPS/eip-1559",children:"EIP-1559"})," mechanism to set the Base Fee for transactions (although with ",(0,n.jsx)(t.a,{href:"#eip-1559-parameters",children:"different parameter values"})," compared to Ethereum)."]}),"\n",(0,n.jsxs)(t.p,{children:["You can read more about how Ethereum's gas fees work over on ",(0,n.jsx)(t.a,{href:"https://ethereum.org/en/developers/docs/gas/",children:"Ethereum.org"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"l1-data-fee",children:"L1 Data Fee"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.a,{href:"https://docs.optimism.io/stack/transactions/fees#l1-data-fee",children:"L1 Data Fee"})," is the only part of the Lisk Mainnet transaction fee that differs from the Ethereum transaction fee.\nThis fee arises from the fact that the transaction data for all Lisk Mainnet transactions is published to Ethereum.\nThis guarantees that the transaction data is available for nodes to download and execute."]}),"\n",(0,n.jsx)(t.p,{children:"The L1 Data Fee is automatically charged for any transaction that is included in a Lisk Mainnet block.\nIt is deducted directly from the address that sent the transaction."}),"\n",(0,n.jsx)(t.p,{children:"The L1 Data Fee is most heavily influenced by the Ethereum base fee that is continuously and trustlessly relayed from Ethereum to Lisk Mainnet."}),"\n",(0,n.jsx)(t.p,{children:"The actual amount of this fee depends on the following input values:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["The ",(0,n.jsx)(t.strong,{children:"signed transaction"})," serialized according to the standard Ethereum transaction RLP encoding."]}),"\n",(0,n.jsxs)(t.li,{children:["The ",(0,n.jsx)(t.strong,{children:"current Ethereum base fee"})," and/or blob base fee (trustlessly relayed from Ethereum)."]}),"\n",(0,n.jsxs)(t.li,{children:["Two ",(0,n.jsx)(t.strong,{children:"scalar parameters"})," that independently scale the base fee and blob base fee."]}),"\n"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"base_fee_scalar"})," = 0.786381"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"blob_base_fee_scalar"})," = 0.01734"]}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"l1-data-fee-calculation",children:"L1 Data Fee calculation"}),"\n",(0,n.jsx)(t.p,{children:"The L1 data fee is claculated according to the following formula:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"l1_data_fee = tx_compressed_size * weighted_gas_price\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Where the ",(0,n.jsx)(t.code,{children:"tx_compressed_size"})," is calculated like this:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"tx_compressed_size = [(count_zero_bytes(tx_data)*4 + count_non_zero_bytes(tx_data)*16)] / 16\n"})}),"\n",(0,n.jsxs)(t.admonition,{type:"note",children:[(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"tx_compressed_size"})," is an estimation on the size the transaction will occupy in blobs.\nThe divisor of 16 represents the storage savings of using blobs vs calldata."]}),(0,n.jsxs)(t.p,{children:['The "L1 Gas used by txn" field of transaction details in ',(0,n.jsx)(t.a,{href:"https://blockscout.lisk.com/",children:"blockcsout"})," contains the ",(0,n.jsx)(t.code,{children:"tx_compressed_size"})," multiplied by 16 (i.e., the calldata size)."]})]}),"\n",(0,n.jsx)(t.p,{children:"Next, the two scalars are applied to the base fee and blob base fee parameters to compute a weighted gas price multiplier."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"weighted_gas_price = 16*base_fee_scalar*base_fee + blob_base_fee_scalar*blob_base_fee\n"})}),"\n",(0,n.jsxs)(t.admonition,{type:"note",children:[(0,n.jsxs)(t.p,{children:["It is currently ",(0,n.jsx)(t.strong,{children:"not"})," possible to limit the maximum L1 Data Fee that a transaction is willing to pay."]}),(0,n.jsxs)(t.p,{children:["For further information about transaction fees, please check the ",(0,n.jsx)(t.a,{href:"https://docs.optimism.io/stack/transactions/fees",children:"Optimism Developer Docs > Transaction Fees"})]})]}),"\n",(0,n.jsx)(t.h2,{id:"eip-1559-parameters",children:"EIP-1559 Parameters"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.a,{href:"https://eips.ethereum.org/EIPS/eip-1559",children:"EIP-1559"})," parameters used by the Lisk Mainnet differ from those used by Ethereum as follows:"]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Parameter"}),(0,n.jsx)(t.th,{style:{textAlign:"right"},children:"Lisk Mainnet value"}),(0,n.jsx)(t.th,{style:{textAlign:"right"},children:"Ethereum value (for reference)"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Block gas limit"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"30,000,000 gas"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"30,000,000 gas"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Block gas target"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"1,500,000 gas"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"15,000,000 gas"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"EIP-1559 elasticity multiplier"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"20"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"2"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"EIP-1559 denominator"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"1,000"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"8"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Maximum base fee increase (per block)"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"1.9%"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"12.5%"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Maximum base fee decrease (per block)"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"0.1%"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"12.5%"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Block time in seconds"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"2"}),(0,n.jsx)(t.td,{style:{textAlign:"right"},children:"12"})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"how-do-fluctuation-in-gas-price-on-ethereum-l1-affect-transaction-costs-on-lisk-l2",children:"How do fluctuation in gas price on Ethereum (L1) affect transaction costs on Lisk (L2)?"}),"\n",(0,n.jsx)(t.p,{children:"While the L1 Data Fee will be always cheaper compared to posting the transaction directly to Ethereum mainnet (due to the efficient encoding in batching transactions), it's value will vary depending on the amount of transactions on the L1.\nIf the timing of your transaction is flexible, you can save cost by submitting transactions during periods when gas prices on L1 are lower than usual for example, over the weekend."}),"\n",(0,n.jsx)(t.p,{children:"Changes after the transaction is processed on the sequencer do not affect the cost the user pays."}),"\n",(0,n.jsx)(t.p,{children:"For an L2 transaction, the normal process is:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"The wallet estimates the cost of the transaction and shows it to the user."}),"\n",(0,n.jsx)(t.li,{children:"The user then submits the transaction."}),"\n",(0,n.jsxs)(t.li,{children:["The sequencer processes the transaction in two phases.","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"First, it processes the transaction."}),"\n",(0,n.jsx)(t.li,{children:"Then, it deducts the gas cost, based on the L1 and L2 gas prices at that time."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.li,{children:"After that, the transaction is written to L1."}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["In principle, between steps 1 and 3 the gas price might change. However, it can not increase by more than 12.5%, therefore the difference between the price shown to user in step 1 and the actual one is bounded by 12.5%.",(0,n.jsx)(t.br,{}),"\n","After step 3, the finality of the transaction is Lisk's responsibility.\nIf the L1 gas price spikes, Lisk pays the new cost."]}),"\n",(0,n.jsxs)(t.p,{children:["In conclusion, the user will pay at most 12.5% more than expected.\nSee the ",(0,n.jsx)(t.a,{href:"https://docs.optimism.io/stack/transactions/fees#mechanism",children:"Optimism Docs > Transaction Fees"})," for more information around transaction fees."]})]})}function d(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},1151:(e,t,s)=>{s.d(t,{Z:()=>r,a:()=>o});var n=s(7294);const i={},a=n.createContext(i);function o(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);